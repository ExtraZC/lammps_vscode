

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.2. Build LAMMPS with make &mdash; LAMMPS documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="LAMMPS documentation" href="index.html"/>
        <link rel="up" title="3. Build LAMMPS" href="Build.html"/>
        <link rel="next" title="3.3. Link LAMMPS as a library to another code" href="Build_link.html"/>
        <link rel="prev" title="3.1. Build LAMMPS with CMake" href="Build_cmake.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="Manual.html">
        

        
          
          <img src="_static/lammps-logo.png" class="logo" />
        
        </a>

        <div class="lammps_version">Version: <b>19 Mar 2020</b></div>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Build.html">3. Build LAMMPS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Build_cmake.html">3.1. Build LAMMPS with CMake</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.2. Build LAMMPS with make</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_link.html">3.3. Link LAMMPS as a library to another code</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_basics.html">3.4. Basic build options</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_settings.html">3.5. Optional build settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_package.html">3.6. Include packages in build</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_extras.html">3.7. Packages with extra build options</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_windows.html">3.8. Notes for building LAMMPS on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="Build_development.html">3.9. Development build options (CMake only)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">11. Modify &amp; extend LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">12. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">13. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Manual_build.html">14. Building the LAMMPS manual</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="Manual.html">LAMMPS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="Manual.html">Docs</a> &raquo;</li>
      
          <li><a href="Build.html"><span class="section-number">3. </span>Build LAMMPS</a> &raquo;</li>
      
    <li><span class="section-number">3.2. </span>Build LAMMPS with make</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="http://lammps.sandia.gov">Website</a>
            <a href="Commands_all.html">Commands</a>
        
      </li>
  </ul>
  <hr style="margin-top: 6px; margin-bottom: 6px;" width="100%"/>
  
    <div class="rst-footer-buttons" style="margin-bottom: 1em" role="navigation" aria-label="footer navigation">
      
        <a href="Build_link.html" class="btn btn-neutral float-right" title="3.3. Link LAMMPS as a library to another code" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Build_cmake.html" class="btn btn-neutral" title="3.1. Build LAMMPS with CMake" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="build-lammps-with-make">
<h1><span class="section-number">3.2. </span>Build LAMMPS with make</h1>
<p>Building LAMMPS with traditional makefiles requires that you have a
Makefile.”machine” file appropriate for your system in the src/MAKE,
src/MAKE/MACHINES, src/MAKE/OPTIONS, or src/MAKE/MINE directory (see
below).  It can include various options for customizing your LAMMPS
build with a number of global compilation options and features.</p>
<p>Those makefiles are written for and tested with GNU make and may not
be compatible with other make programs.  In most cases, if the “make”
program is not GNU make, then there will be a GNU make program
available under the name “gmake”.  If GNU make or a compatible make is
not available, you may have to first install it or switch to building
with <a class="reference internal" href="Build_cmake.html"><span class="doc">CMake</span></a>.  The makefiles of the traditional
make based build process and the scripts they are calling expect a few
additional tools to be available and functioning.</p>
<blockquote>
<div><ul class="simple">
<li><p>a Bourne shell compatible “Unix” shell program (often this is bash)</p></li>
<li><p>a few shell utilities: ls, mv, ln, rm, grep, sed, tr, cat, touch, diff, dirname</p></li>
<li><p>python (optional, required for “make lib-XXX” in the src folder)</p></li>
</ul>
</div></blockquote>
<p>To include LAMMPS packages (i.e. optional commands and styles) you
must enable them first, as discussed on the <a class="reference internal" href="Build_package.html"><span class="doc">Build package</span></a> doc page.  If a packages requires (provided or
external) libraries, you must configure and build those libraries
<strong>before</strong> building LAMMPS itself and especially <strong>before</strong> enabling
such a package with “make yes-&lt;package&gt;”.  Building <a class="reference internal" href="Build_cmake.html"><span class="doc">LAMMPS
with CMake</span></a> can automate much of this for many types of
machines, especially workstations, desktops, and laptops, so we suggest
you try it first when building LAMMPS in those cases.</p>
<p>The commands below perform a default LAMMPS build, producing the LAMMPS
executable lmp_serial and lmp_mpi in lammps/src:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> lammps/src
make serial     <span class="c1"># build a serial LAMMPS executable</span>
make mpi        <span class="c1"># build a parallel LAMMPS executable with MPI</span>
make            <span class="c1"># see a variety of make options</span>
</pre></div>
</div>
<p>This initial compilation can take a long time, since LAMMPS is a large
project with many features. If your machine has multiple CPU cores
(most do these days), using a command like “make -jN mpi” (with N =
the number of available CPU cores) can be much faster.  If you plan to
do development on LAMMPS or need to re-compile LAMMPS repeatedly, the
installation of the ccache (= Compiler Cache) software may speed up
compilation even more.</p>
<p>After the initial build, whenever you edit LAMMPS source files, or add
or remove new files to the source directory (e.g. by installing or
uninstalling packages), you must re-compile and relink the LAMMPS
executable with the same “make” command.  This makefiles dependencies
should insure that only the subset of files that need to be are
re-compiled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before the actual compilation starts, LAMMPS will perform several
steps to collect information from the configuration and setup that
is then embedded into the executable.  When you build LAMMPS for
the first time, it will also compile a tool to quickly assemble
a list of dependencies, that are required for the make program to
correctly detect which parts need to be recompiled after changes
were made to the sources.</p>
</div>
<hr class="docutils" />
<p>The lammps/src/MAKE tree contains the Makefile.machine files included
in the LAMMPS distribution.  Typing “make machine” uses
<em>Makefile.machine</em>.  Thus the “make serial” or “make mpi” lines above
use Makefile.serial and Makefile.mpi, respectively.  Other makefiles
are in these directories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>OPTIONS      <span class="c1"># Makefiles which enable specific options</span>
MACHINES     <span class="c1"># Makefiles for specific machines</span>
MINE         <span class="c1"># customized Makefiles you create (you may need to create this folder)</span>
</pre></div>
</div>
<p>Typing “make” lists all the available Makefile.machine files.  A file
with the same name can appear in multiple folders (not a good idea).
The order the directories are searched is as follows: src/MAKE/MINE,
src/MAKE, src/MAKE/OPTIONS, src/MAKE/MACHINES.  This gives preference
to a customized file you put in src/MAKE/MINE.</p>
<p>Makefiles you may wish to try include these (some require a package
first be installed).  Many of these include specific compiler flags
for optimized performance.  Please note, however, that some of these
customized machine Makefile are contributed by users.  Since both
compilers, OS configurations, and LAMMPS itself keep changing, their
settings may become outdated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make mac             <span class="c1"># build serial LAMMPS on a Mac</span>
make mac_mpi         <span class="c1"># build parallel LAMMPS on a Mac</span>
make intel_cpu       <span class="c1"># build with the USER-INTEL package optimized for CPUs</span>
make knl             <span class="c1"># build with the USER-INTEL package optimized for KNLs</span>
make opt             <span class="c1"># build with the OPT package optimized for CPUs</span>
make omp             <span class="c1"># build with the USER-OMP package optimized for OpenMP</span>
make kokkos_omp      <span class="c1"># build with the KOKKOS package for OpenMP</span>
make kokkos_cuda_mpi <span class="c1"># build with the KOKKOS package for GPUs</span>
make kokkos_phi      <span class="c1"># build with the KOKKOS package for KNLs</span>
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Build_link.html" class="btn btn-neutral float-right" title="3.3. Link LAMMPS as a library to another code" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Build_cmake.html" class="btn btn-neutral" title="3.1. Build LAMMPS with CMake" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr style="margin-top: 6px; margin-bottom: 6px;" width="100%"/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2003-2020 Sandia Corporation.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/mathjax/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>