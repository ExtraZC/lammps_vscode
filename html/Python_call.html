

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12.10. Call Python from a LAMMPS input script &mdash; LAMMPS documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="LAMMPS documentation" href="index.html"/>
        <link rel="up" title="12. Use Python with LAMMPS" href="Python_head.html"/>
        <link rel="next" title="13. Errors" href="Errors.html"/>
        <link rel="prev" title="12.9. Example Python scripts that use LAMMPS" href="Python_examples.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="Manual.html">
        

        
          
          <img src="_static/lammps-logo.png" class="logo" />
        
        </a>

        <div class="lammps_version">Version: <b>19 Mar 2020</b></div>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">11. Modify &amp; extend LAMMPS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Python_head.html">12. Use Python with LAMMPS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Python_overview.html">12.1. Overview of Python and LAMMPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_run.html">12.2. Run LAMMPS from Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_shlib.html">12.3. Build LAMMPS as a shared library</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_install.html">12.4. Installing LAMMPS in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_mpi.html">12.5. Extending Python to run in parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_test.html">12.6. Test the Python/LAMMPS interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_library.html">12.7. Python library interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_pylammps.html">12.8. PyLammps interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python_examples.html">12.9. Example Python scripts that use LAMMPS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12.10. Call Python from a LAMMPS input script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">13. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Manual_build.html">14. Building the LAMMPS manual</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="Manual.html">LAMMPS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="Manual.html">Docs</a> &raquo;</li>
      
          <li><a href="Python_head.html"><span class="section-number">12. </span>Use Python with LAMMPS</a> &raquo;</li>
      
    <li><span class="section-number">12.10. </span>Call Python from a LAMMPS input script</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="http://lammps.sandia.gov">Website</a>
            <a href="Commands_all.html">Commands</a>
        
      </li>
  </ul>
  <hr style="margin-top: 6px; margin-bottom: 6px;" width="100%"/>
  
    <div class="rst-footer-buttons" style="margin-bottom: 1em" role="navigation" aria-label="footer navigation">
      
        <a href="Errors.html" class="btn btn-neutral float-right" title="13. Errors" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Python_examples.html" class="btn btn-neutral" title="12.9. Example Python scripts that use LAMMPS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="call-python-from-a-lammps-input-script">
<h1><span class="section-number">12.10. </span>Call Python from a LAMMPS input script</h1>
<p>LAMMPS has several commands which can be used to invoke Python
code directly from an input script:</p>
<ul class="simple">
<li><p><a class="reference internal" href="python.html"><span class="doc">python</span></a></p></li>
<li><p><a class="reference internal" href="variable.html"><span class="doc">variable python</span></a></p></li>
<li><p><a class="reference internal" href="fix_python_invoke.html"><span class="doc">fix python/invoke</span></a></p></li>
<li><p><a class="reference internal" href="pair_python.html"><span class="doc">pair_style python</span></a></p></li>
</ul>
<p>The <a class="reference internal" href="python.html"><span class="doc">python</span></a> command which can be used to define and
execute a Python function that you write the code for.  The Python
function can also be assigned to a LAMMPS python-style variable via
the <a class="reference internal" href="variable.html"><span class="doc">variable</span></a> command.  Each time the variable is
evaluated, either in the LAMMPS input script itself, or by another
LAMMPS command that uses the variable, this will trigger the Python
function to be invoked.</p>
<p>The Python code for the function can be included directly in the input
script or in an auxiliary file.  The function can have arguments which
are mapped to LAMMPS variables (also defined in the input script) and
it can return a value to a LAMMPS variable.  This is thus a mechanism
for your input script to pass information to a piece of Python code,
ask Python to execute the code, and return information to your input
script.</p>
<p>Note that a Python function can be arbitrarily complex.  It can import
other Python modules, instantiate Python classes, call other Python
functions, etc.  The Python code that you provide can contain more
code than the single function.  It can contain other functions or
Python classes, as well as global variables or other mechanisms for
storing state between calls from LAMMPS to the function.</p>
<p>The Python function you provide can consist of “pure” Python code that
only performs operations provided by standard Python.  However, the
Python function can also “call back” to LAMMPS through its
Python-wrapped library interface, in the manner described in the
<a class="reference internal" href="Python_run.html"><span class="doc">Python run</span></a> doc page.  This means it can issue LAMMPS
input script commands or query and set internal LAMMPS state.  As an
example, this can be useful in an input script to create a more
complex loop with branching logic, than can be created using the
simple looping and branching logic enabled by the <a class="reference internal" href="next.html"><span class="doc">next</span></a> and
<a class="reference internal" href="if.html"><span class="doc">if</span></a> commands.</p>
<p>See the <a class="reference internal" href="python.html"><span class="doc">python</span></a> doc page and the <a class="reference internal" href="variable.html"><span class="doc">variable</span></a>
doc page for its python-style variables for more info, including
examples of Python code you can write for both pure Python operations
and callbacks to LAMMPS.</p>
<p>The <a class="reference internal" href="fix_python_invoke.html"><span class="doc">fix python/invoke</span></a> command can execute
Python code at selected timesteps during a simulation run.</p>
<p>The <a class="reference internal" href="pair_python.html"><span class="doc">pair_style python</span></a> command allows you to define
pairwise potentials as python code which encodes a single pairwise
interaction.  This is useful for rapid development and debugging of a
new potential.</p>
<p>To use any of these commands, you only need to build LAMMPS with the
PYTHON package installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make yes-python
make machine
</pre></div>
</div>
<p>Note that this will link LAMMPS with the Python library on your
system, which typically requires several auxiliary system libraries to
also be linked.  The list of these libraries and the paths to find
them are specified in the lib/python/Makefile.lammps file.  You need
to insure that file contains the correct information for your version
of Python and your machine to successfully build LAMMPS.  See the
lib/python/README file for more info.</p>
<p>If you want to write Python code with callbacks to LAMMPS, then you
must also follow the steps summarized in the <a class="reference internal" href="Python_run.html"><span class="doc">Python run</span></a> doc page.  I.e. you must build LAMMPS as a shared
library and insure that Python can find the python/lammps.py file and
the shared library.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Errors.html" class="btn btn-neutral float-right" title="13. Errors" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Python_examples.html" class="btn btn-neutral" title="12.9. Example Python scripts that use LAMMPS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr style="margin-top: 6px; margin-bottom: 6px;" width="100%"/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2003-2020 Sandia Corporation.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/mathjax/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>